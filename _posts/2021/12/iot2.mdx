---
title: 'Smart home: architektura z-wave i zastosowania'
permalink: iot-smart-home-architektura-z-wave-i-zastosowania
type: post
date: 2021-12-09T21:37:28.824Z
authors:
  - michal-miszczyszyn
category: opinie
thumbnail:
  url: https://res.cloudinary.com/type-of-web/image/upload/v1638480696/iot-smart-home-zigbee-z-wave-wifi_zuurdh.png
  width: 1920
  height: 1004
---

W poprzednim artykule opisaÅ‚em moje przemyÅ›lenia odnoÅ›nie rÃ³Å¼nych bezprzewodowych technologii uÅ¼ywanych do tworzenia inteligentnego domu. Dzisiaj skupiam siÄ™ konkretnie na wybranym przeze mnie z-wave: architekturze rozwiÄ…zania, a takÅ¼e zastosowaniach.

---

## Architektura z-wave

Z-wave daje moÅ¼liwoÅ›Ä‡ tworzenia **czÄ™Å›ciowo rozproszonej** sieci urzÄ…dzeÅ„. Co to oznacza? W przypadku z-wave musimy mieÄ‡ centralkÄ™ â€“ to jest urzÄ…dzenie, ktÃ³re zarzÄ…dza wszystkim. To wÅ‚aÅ›nie centralka odpowiada za konfiguracjÄ™ zachowaÅ„, automatyzacji, dodawanie i usuwanie nowych urzÄ…dzeÅ„, a takÅ¼e potencjalnie za dostÄ™p zdalny do naszego inteligentnego domu.

<figure>
  <img
    src="https://res.cloudinary.com/type-of-web/image/upload/v1638734057/L_packshot_HC3_3_RGB_rflno8.jpg"
    alt="Centrala inteligentnego domu Fibaro Home Center 3"
    width="660"
    height="440"
  />
  <figcaption>
    <p>Centrala inteligentnego domu Fibaro Home Center 3</p>
    <p>ZdjÄ™cie pochodzi ze strony fibaro.com</p>
  </figcaption>
</figure>

<figure>
  <img
    src="https://res.cloudinary.com/type-of-web/image/upload/v1638734062/201007_Ezlo_Secure_Podium_1_2400x1500.png_mdmfli.webp"
    alt="Centrala inteligentnego domu Ezlo Secure (dawniej Vera)"
    width="600"
    height="375"
  />
  <figcaption>
    <p>Centrala inteligentnego domu Ezlo Secure (dawniej Vera)</p>
    <p>ZdjÄ™cie pochodzi ze strony getvera.com</p>
  </figcaption>
</figure>

## Mesh

Chwila, chwila â€“ ale to przecieÅ¼ brzmi jak caÅ‚kowicie scentralizowane rozwiÄ…zanie?! Nie do koÅ„ca. UrzÄ…dzenia z-wave musimy dodaÄ‡ za pomocÄ… centralki, ale pÃ³Åºniej dziÄ™ki temu, Å¼e urzÄ…dzenia z-wave Å‚Ä…czÄ… siÄ™ w siatkÄ™, to centralka moÅ¼e byÄ‡ praktycznie gdziekolwiek â€“ u mnie bÄ™dzie w garaÅ¼u. UrzÄ…dzenie i tak poÅ‚Ä…czy siÄ™ z niÄ… albo bezpoÅ›rednio (jeÅ›li bÄ™dzie dostatecznie blisko), albo za poÅ›rednictwem innych urzÄ…dzeÅ„ (maksymalnie czterech).

[rysunek?]

PrzykÅ‚adowo, urzÄ…dzenie zamontowane na poddaszu poÅ‚Ä…czy siÄ™ z urzÄ…dzeniem na pierwszym piÄ™trze, ktÃ³re z kolei poÅ‚Ä…czy siÄ™ z urzÄ…dzeniem w salonie, a to poÅ‚Ä…czy siÄ™ z centralkÄ… w garaÅ¼u. Jest to jak najbardziej poprawne zachowanie â€“ tworzy siÄ™ siatka (mesh), dziÄ™ki ktÃ³rej znacznie zwiÄ™ksza siÄ™ zasiÄ™g sieci z-wave.

## Asocjacje

UrzÄ…dzenia mogÄ… siÄ™ Å‚Ä…czyÄ‡ miÄ™dzy sobÄ… rÃ³wnieÅ¼ bezpoÅ›rednio, zupeÅ‚nie niezaleÅ¼nie od centralki. Jest to szczegÃ³lnie przydatne dla systemÃ³w krytycznych pod wzglÄ™dem bezpieczeÅ„stwa. WyobraÅºmy sobie taki scenariusz, Å¼e mamy w salonie czujnik dymu, ktÃ³ry powinien natychmiast odciÄ…Ä‡ dopÅ‚yw gazu do pieca, gdy zostanie wykryte zadymienie. MogliÅ›my zaprzÄ…c do tego centralkÄ™, ale co w sytuacji, jeÅ›li z jakiegoÅ› powodu centralka przestanie dziaÅ‚aÄ‡ / spali siÄ™Â / zostanie uszkodzona? Nie chcemy przecieÅ¼ ryzykowaÄ‡! WÅ‚aÅ›nie wtedy bardzo przydajÄ… siÄ™ asocjacje â€“ czujnik dymu Å‚Ä…czymy bezpoÅ›rednio z elektrozaworem gazu i dziÄ™ki temu zabezpieczenie zadziaÅ‚a bez koniecznoÅ›ci komunikowania siÄ™ przez centralÄ™. To dopiero _smart home_!

## Scenariusze inteligentnego domu

Po publikacji poprzedniego artykuÅ‚u kilka osÃ³b pytaÅ‚o mnie o to, jakie w ogÃ³le mam pomysÅ‚y na automatyzacje. OtÃ³Å¼ do tego tematu moÅ¼emy podejÅ›Ä‡ na dwa sposoby:

### **bottom-up**

Wchodzimy na stronÄ™ internetowÄ… sklepu ze sprzÄ™tem do _smart home_, przeglÄ…damy rÃ³Å¼norakie urzÄ…dzenia i wtedy do gÅ‚owy przychodzÄ… nam pomysÅ‚y na ich zastosowanie w naszym domu.

Moim zdaniem wÅ‚aÅ›nie takie podejÅ›cie najlepiej siÄ™ sprawdza na poczÄ…tku, gdy jeszcze jesteÅ›my kompletnie zieloni w temacie i chcemy w ogÃ³le poznaÄ‡ moÅ¼liwoÅ›ci inteligentnych domÃ³w. Pytamy: â€Co siÄ™ da zrobiÄ‡?â€ nie zastanawiajÄ…c siÄ™, czy jest to nam potrzebne.

PrzykÅ‚adowo, warto wiedzieÄ‡, Å¼e istniejÄ… przeÅ‚Ä…czniki (_relay_), elektrozawory, Å›ciemniacze (do oÅ›wietlenia), urzÄ…dzenia do sterowania roletami i tak dalej. WiÄ™cej o nich za moment.

### **top-down**

Gdy juÅ¼ kojarzymy mniej wiÄ™cej jakie urzÄ…dzenia dostÄ™pne sÄ… na rynku, moÅ¼emy przejÅ›Ä‡ do innego sposobu myÅ›lenia. â€Co jest mi potrzebne?â€ â€“ stawiamy pytanie w ten sposÃ³b i zaczynamy opisywaÄ‡ scenariusze automatyzacji. MyÅ›lÄ™, Å¼e warto tutaj zaangaÅ¼owaÄ‡ caÅ‚Ä… rodzinÄ™ do kreatywnej burzy mÃ³zgÃ³w ğŸ˜‰ PrzykÅ‚adowo, scenariusze, ktÃ³re my rozpisaliÅ›my do naszego domu:

**1. WyjÅ›cie z domu**: Gdy wychodzÄ™ z domu, powinienem mieÄ‡ moÅ¼liwoÅ›Ä‡ wciÅ›niÄ™cia jednego przycisku, ktÃ³ry zamknie wszystkie rolety i bramÄ™ garaÅ¼owÄ…, zgasi Å›wiatÅ‚a, i uzbroi alarm.

**2. Pobudka**: ChciaÅ‚bym, aby o zadanej godzinie automatycznie podnosiÅ‚a siÄ™ roleta w sypialni i zaczynaÅ‚a graÄ‡ muzyka.

**3. Wakacje**: Gdy wyjeÅ¼dÅ¼am na dÅ‚uÅ¼szy czas, chciaÅ‚bym zastosowaÄ‡ scenariusz **WyjÅ›cie z domu**, a ponadto przeÅ‚Ä…czyÄ‡ piec i ogrzewanie podÅ‚ogowe w tryb oszczÄ™dny i zakrÄ™ciÄ‡ bieÅ¼Ä…cÄ… wodÄ™.

**4. WczeÅ›niejszy powrÃ³t do domu**: ChciaÅ‚bym mieÄ‡ moÅ¼liwoÅ›Ä‡ wÅ‚Ä…czenia ogrzewania w domu zdalnie z telefonu, gdy wiem, Å¼e wrÃ³cÄ™ wczeÅ›niej niÅ¼ zwykle.

**5. Okna dachowe w deszczu**: ChciaÅ‚bym otrzymaÄ‡ powiadomienie na telefonie, gdy zacznie padaÄ‡ deszcz, a okna dachowe bÄ™dÄ… otwarte. (Wersja bardziej luksusowa: ChciaÅ‚bym, aby okna dachowe automatycznie siÄ™ zamknÄ™Å‚y, gdy zacznie padaÄ‡ deszcz).

**6. Kurier gdy nikogo nie ma**: ChciaÅ‚bym mieÄ‡ moÅ¼liwoÅ›Ä‡ uchylenia bramy garaÅ¼owej dla kuriera, aby mÃ³gÅ‚ tam schowaÄ‡ przesyÅ‚kÄ™, jeÅ›li nikogo nie ma w domu.

**7. Kominek**: ChciaÅ‚bym, aby wentylacja automatycznie tworzyÅ‚a podciÅ›nienie w domu, gdy wykryte zostanie, Å¼e rozpaliliÅ›my w kominku.

**8. ZÅ‚a jakoÅ›Ä‡ powietrza**: ChciaÅ‚bym, aby wentylacja automatycznie wÅ‚Ä…czaÅ‚a wyÅ¼szy bieg, gdy wykryta zostanie kiepska jakoÅ›Ä‡ powietrza lub wysoka wilgotnoÅ›Ä‡.

## Implementacja scenariuszy

Gdy mamy juÅ¼ rozpisane mniej wiÄ™cej nasze potrzeby na automatyzacjÄ™ i znamy mniej-wiÄ™cej moÅ¼liwoÅ›ci techniczne, czas przystÄ…piÄ‡ do zaprojektowania konkretnych rozwiÄ…zaÅ„ do konkretnych scenariuszy.

WiÄ™kszoÅ›Ä‡ urzÄ…dzeÅ„ z-wave montuje siÄ™ bezpoÅ›rednio w puszkach elektrycznych lub w pobliÅ¼u tego, czym majÄ… sterowaÄ‡.

### Rolety

Rolety majÄ… silniki elektryczne i przycisk pozwalajÄ…cy na sterowanie nimi. Gdy wciskamy klawisz ze strzaÅ‚kÄ… w gÃ³rÄ™, to roleta siÄ™ otwiera, a gdy drugi przycisk, to rolet siÄ™Â zamyka. Pytanie, czy da siÄ™ to zautomatyzowaÄ‡?

[zdjÄ™cie przycisku do rolet]

OdpowiedÅº to: oczywiÅ›cie, Å¼e tak. MoÅ¼emy wykorzystaÄ‡ odpowiednio zaprogramowane przeÅ‚Ä…czniki z-wave albo dedykowane urzÄ…dzenia â€“ w Fibaro pod nazwÄ… _Roller Shutter 3_ (FGR-223). SÅ‚uÅ¼Ä… one do sterowania roletami, markizami, Å¼aluzjami, a takÅ¼e dowolnymi silnikami napÄ™dzanymi prÄ…dem przemiennym (jednofazowym).

[zdjÄ™cie roller shutter]

PodÅ‚Ä…czamy zgodnie z instrukcjÄ… i montujemy jedno takie urzÄ…dzenie w kaÅ¼dej puszce elektrycznej przy rolecie, a nastÄ™pnie parujemy z centralkÄ… i voilÃ ! Co istotne, po zamontowaniu Roller Shuttera nie tracimy moÅ¼liwoÅ›ci sterowania roletami rÄ™cznie â€“ przycisk na Å›cianie nadal dziaÅ‚a, gdybyÅ›my go potrzebowali!

Analogicznie postÄ™pujemy teÅ¼ z bramÄ… garaÅ¼owÄ….

### OÅ›wietlenie

Do sterowania oÅ›wietleniem rÃ³wnieÅ¼ moÅ¼emy zastosowaÄ‡ urzÄ…dzenie z-wave typu _relay_, np. _Double Switch 2_ (FGS-223) pozwalajÄ…ce na sterowanie dwoma ÅºrÃ³dÅ‚ami Å›wiatÅ‚a.

[zdjÄ™cie]

_Double Switch_ rÃ³wnieÅ¼ montujemy zgodnie z instrukcjÄ… w puszce elektrycznej pod Å‚Ä…cznikiem, ktÃ³ry do tej pory sÅ‚uÅ¼yÅ‚ nam do manualnego sterowania oÅ›wietleniem, parujemy i gotowe. Od teraz moÅ¼emy gasiÄ‡ i zapalaÄ‡ Å›wiatÅ‚o przy pomocy telefonu bÄ…dÅº przeglÄ…darki.

### Sceny

Teraz, skoro mamy juÅ¼ wszystko, to pozostaje nam tylko poszczegÃ³lne elementy poÅ‚Ä…czyÄ‡ w jednÄ… caÅ‚oÅ›Ä‡. Przy wyjÅ›ciu z domu montujÄ™ przycisk i, co istotne, moÅ¼e byÄ‡ on w dowolnym miejscu jeÅ›li zdecydujÄ™ siÄ™ na taki, ktÃ³ry zasilany jest bateryjnie. To Å›wietna opcja!

Przycisk jest â€aktoremâ€, ktÃ³rego wciÅ›niÄ™cie ma uruchomiÄ‡ scenÄ™, ktÃ³ra wyÅ‚Ä…czy Å›wiatÅ‚o dziÄ™ki Double Switchom i opuÅ›ci rolety przez Roller Shuttery. W przypadku Fibaro caÅ‚y ten proces moÅ¼na â€wyklikaÄ‡â€ w blokowym edytorze scen.

[obrazek]
[z filmu https://www.youtube.com/watch?v=akHjalzUCR0]

## Co dalej ze smart home?

MoÅ¼liwe jest teÅ¼ oczywiÅ›cie budowanie bardziej skomplikowanych scen, a nawet programowanie ich w jÄ™zyku skryptowym Lua.

PodobaÅ‚y Wam siÄ™ moje scenariusze? ChcielibyÅ›cie, abym bardziej szczegÃ³Å‚owo opisaÅ‚ z jakich urzÄ…dzeÅ„ korzystam do zaimplementowania wszystkich z nich? Dajcie mi znaÄ‡ w komentarzach!

â€“ planowane jest osobne biuro z maÅ‚ym studiem do nagraÅ„ na YouTube â€“ zobaczymy co z tych planÃ³w wyjdzie :)
